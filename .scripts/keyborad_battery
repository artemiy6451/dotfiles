#!/bin/bash

# –£–∫–∞–∂–∏ –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ upower
DEVICE_NAME="keyboard_dev_C9_45_B0_0C_D6_AC"

# –ò—â–µ–º –ø—É—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ –∏–º–µ–Ω–∏
DEVICE_PATH=$(upower -e | grep -i "$DEVICE_NAME")

# –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏–º
if [ -z "$DEVICE_PATH" ]; then
    exit 0
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –ª–∏ –æ–Ω–æ
IS_PRESENT=$(upower -i "$DEVICE_PATH" | awk '/present:/ {print $2}')
if [ "$IS_PRESENT" != "yes" ]; then
    exit 0
fi

# –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞—Ä—è–¥–∞
PERCENT=$(upower -i "$DEVICE_PATH" | awk '/percentage/ {print $2}')

# –í—ã–≤–æ–¥
if [ -n "$PERCENT" ]; then
    echo "üîã $PERCENT"
fi
